[server]
http_port = 3000
root_url = http://localhost/grafana
serve_from_sub_path = true
enforce_domain = false

[auth]
disable_login_form = true
disable_signout_menu = false

[auth.proxy]
enabled = true
header_name = X-WEBAUTH-USER
header_property = username
auto_sign_up = true
headers = Name:X-WEBAUTH-NAME Email:X-WEBAUTH-EMAIL Role:X-WEBAUTH-ROLE Permissions:X-WEBAUTH-PERMISSIONS
# 启用基于角色的权限控制
role_attribute_path = X-WEBAUTH-ROLE
role_attribute_strict = false
# 角色映射：将自定义角色映射到Grafana角色
# admin -> Admin, editor -> Editor, viewer -> Viewer
role_mapping = admin:Admin editor:Editor viewer:Viewer
sync_ttl = 60
whitelist = 172.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8
enable_login_token = false

[users]
allow_sign_up = false
allow_org_create = false
auto_assign_org = true
auto_assign_org_id = 1
auto_assign_org_role = Editor
default_theme = dark

[security]
admin_user = admin
admin_password = admin123
secret_key = SW2YcwTIb9zpOOhoPsMm
cookie_secure = false
cookie_samesite = lax
allow_embedding = true

[log]
mode = console
level = debug

[database]
type = sqlite3
path = /var/lib/grafana/grafana.db

[session]
provider = memory

[analytics]
reporting_enabled = false
check_for_updates = false

[snapshots]
external_enabled = false